<style>
.pub-card{display:flex;gap:18px;align-items:flex-start;margin:28px 0;padding:16px;border:1px solid #e6e6e6;border-radius:12px;background:#fff}
.pub-media{flex:0 0 260px}
.pub-media img,.pub-media iframe{width:100%;height:auto;border-radius:10px;border:1px solid #eee}
.pub-body{flex:1}
.pub-title{font-size:1.25rem;font-weight:700;margin:0 0 6px}
.pub-meta{color:#666;margin-bottom:8px}
.pub-links{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
.pub-links a,.pub-links button{padding:6px 10px;border-radius:8px;border:1px solid #ddd;background:#f7f7f7;font-size:.92rem;text-decoration:none;cursor:pointer}
.pub-abstract{display:none;margin-top:10px;padding:10px;border-left:3px solid #e0e0e0;background:#fafafa;border-radius:6px}
@media (max-width:800px){
  .pub-card{flex-direction:column}
  .pub-media{flex:unset}
}
</style>

<div class="pub-card" id="pub-{{ include.id }}">
  <div class="pub-media">
    {% if include.video %}
      <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:10px;border:1px solid #eee">
        <iframe src="{{ include.video }}" title="video"
          style="position:absolute;top:0;left:0;width:100%;height:100%;border:0" allowfullscreen></iframe>
      </div>
    {% elsif include.img %}
      <img src="{{ include.img }}" alt="{{ include.img_alt | default: 'figure' }}">
    {% endif %}
  </div>

  <div class="pub-body">
    <div class="pub-title">{{ include.title }}</div>
    <div class="pub-meta">
      <strong>{{ include.authors }}</strong><br/>
      {{ include.venue }}{% if include.year %}, {{ include.year }}{% endif %}
    </div>

    <div class="pub-links">
      {% if include.abstract %}
        <button type="button" onclick="(function(){var a=document.getElementById('abs-{{ include.id }}'); a.style.display = (a.style.display==='block')?'none':'block';})()">Abstract</button>
      {% endif %}
      {% if include.paper %}<a href="{{ include.paper }}" target="_blank">Paper</a>{% endif %}
      {% if include.website %}<a href="{{ include.website }}" target="_blank">Website</a>{% endif %}
      {% if include.code %}<a href="{{ include.code }}" target="_blank">Code</a>{% endif %}
      {% if include.video and include.video_external %}<a href="{{ include.video_external }}" target="_blank">Video</a>{% endif %}
      {% if include.dataset %}<a href="{{ include.dataset }}" target="_blank">Dataset</a>{% endif %}
      {% if include.other_text and include.other_link %}<a href="{{ include.other_link }}" target="_blank">{{ include.other_text }}</a>{% endif %}
    </div>

    {% if include.abstract %}
      <div class="pub-abstract" id="abs-{{ include.id }}">{{ include.abstract }}</div>
    {% endif %}
  </div>
</div>

<script>
/* 让“Abstract”按钮第一次点击时展开 */
</script>
